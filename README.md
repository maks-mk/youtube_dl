# YouTube Downloader

Программа для скачивания видео и аудио с YouTube с удобным графическим интерфейсом.

## Требования

1. Python 3.7 или выше
2. FFmpeg (должен быть установлен и доступен в системном PATH)
3. Браузер с авторизацией в YouTube (Chrome, Firefox, Edge, Opera, Brave или Safari)
4. Стабильное интернет-соединение

## Установка

1. Установите Python с [официального сайта](https://www.python.org/downloads/)

2. Установите FFmpeg:
   - Windows: 
     1. Скачайте FFmpeg с [официального сайта](https://ffmpeg.org/download.html)
     2. Распакуйте архив
     3. Добавьте путь к папке bin в системную переменную PATH
     4. Убедитесь, что файл ffmpeg.exe доступен через командную строку

3. Установите необходимые Python-пакеты:
```bash
pip install -r requirements.txt
```

## Настройка

1. При первом запуске программа создаст файл `settings.json` с настройками по умолчанию
2. Вы можете изменить настройки, отредактировав файл `settings.json`:
```json
{
    "download_mode": "video",
    "last_resolution": "720p",
    "cookies_from_browser": "chrome"
}
```

Доступные значения для `cookies_from_browser`:
- "chrome" - Google Chrome
- "firefox" - Mozilla Firefox
- "edge" - Microsoft Edge
- "opera" - Opera
- "brave" - Brave Browser
- "safari" - Safari (только для macOS)
- "chromium" - Chromium

**Важно**: 
- Вы должны быть авторизованы в YouTube в выбранном браузере
- Рекомендуется использовать браузер, в котором вы регулярно пользуетесь YouTube

## Важное примечание по авторизации

Перед использованием программы необходимо:

1. Войти в свой аккаунт YouTube в браузере:
   - Откройте YouTube
   - Нажмите "Войти" в правом верхнем углу
   - Войдите в свой аккаунт Google
   - Убедитесь, что вы можете смотреть видео без капчи

2. Укажите правильный браузер в settings.json:
   ```json
   {
       "download_mode": "video",
       "last_resolution": "720p",
       "cookies_from_browser": "chrome"  // Укажите ваш браузер
   }
   ```

   Поддерживаемые браузеры:
   - "chrome" - Google Chrome
   - "firefox" - Mozilla Firefox
   - "edge" - Microsoft Edge
   - "opera" - Opera
   - "brave" - Brave Browser
   - "safari" - Safari (только для macOS)
   - "chromium" - Chromium

3. Убедитесь, что:
   - Браузер установлен в стандартном расположении
   - Вы вошли в аккаунт YouTube в этом браузере
   - Браузер не запущен в режиме инкогнито
   - У вас есть права на чтение профиля браузера

Если проблема сохраняется:
1. Попробуйте использовать другой браузер
2. Убедитесь, что вы регулярно пользуетесь YouTube в этом браузере
3. Очистите cookies браузера, снова войдите в YouTube и подождите несколько минут
4. Попробуйте посмотреть несколько видео в браузере перед использованием программы

## Использование

1. Запустите программу:
```bash
python c1.py
```

2. Вставьте URL видео с YouTube:
   - Скопируйте URL видео из браузера
   - Вставьте его в поле URL (можно использовать кнопку "Вставить URL")

3. Выберите режим загрузки:
   - "Видео" - для скачивания видео
   - "Только аудио" - для скачивания в формате MP3

4. Если выбран режим "Видео":
   - Нажмите кнопку "Обновить список" для получения списка доступных разрешений
   - Выберите желаемое разрешение из выпадающего списка

5. Нажмите кнопку "Скачать"

6. Дождитесь завершения загрузки:
   - Для видео будет показан прогресс загрузки видео и аудио отдельно
   - Для аудио будет показан общий прогресс
   - При медленном интернете программа автоматически делает повторные попытки загрузки

7. После завершения загрузки файл будет сохранен в той же папке, где находится программа

## Возможные проблемы

1. "ffmpeg.exe не установлен":
   - Убедитесь, что FFmpeg установлен и добавлен в PATH
   - Проверьте, что файл ffmpeg.exe доступен через командную строку
   - Перезапустите программу

2. "Sign in to confirm you're not a bot":
   - Убедитесь, что вы авторизованы в YouTube в выбранном браузере
   - Проверьте правильность настройки `cookies_from_browser` в settings.json
   - Попробуйте использовать другой браузер
   - Убедитесь, что вы регулярно пользуетесь YouTube в этом браузере

3. "Не удалось получить разрешения для видео":
   - Проверьте подключение к интернету
   - Убедитесь, что URL видео корректный
   - Попробуйте обновить список разрешений

4. "Read timed out" или другие ошибки сети:
   - Проверьте стабильность интернет-соединения
   - Программа автоматически попробует загрузить файл повторно
   - При частых ошибках попробуйте использовать VPN
   - Попробуйте загрузить видео позже

## Примечания

- Программа сохраняет файлы в формате:
  - Видео: `[название видео]_[разрешение].mp4`
  - Аудио: `[название видео]_audio.mp3`
- При попытке загрузки файла с существующим именем программа спросит разрешение на перезапись
- Все действия логируются в файл `download.log`
- Программа использует cookies из браузера для обхода ограничений YouTube
- Настройки сохраняются между запусками программы
- При проблемах с сетью программа автоматически делает до 10 попыток загрузки

## Файлы программы

- `c1.py` - основной файл программы
- `requirements.txt` - список зависимостей
- `settings.json` - файл настроек
- `ytdl.ico` - иконка приложения
- `download.log` - файл логов

## Создание EXE-файла (опционально)

Вы можете создать исполняемый файл с помощью PyInstaller:

1. Установите PyInstaller:
```bash
pip install pyinstaller
```

2. Создайте EXE-файл:
```bash
pyinstaller --onefile --windowed --icon=ytdl.ico c1.py
```

3. Готовый EXE-файл будет находиться в папке dist